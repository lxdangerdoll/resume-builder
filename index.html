<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mercy in Wonderland</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400&family=Source+Code+Pro:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #1a1a1d;
            --text-color: #c5c6c7;
            --choice-bg: #4b5d67;
            --choice-hover-bg: #6b7d87;
            --accent-color: #66fcf1;
        }
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Lora', serif;
            font-size: 1.2em;
            line-height: 1.8;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        #game-container {
            max-width: 800px;
            width: 100%;
            padding: 40px;
            box-sizing: border-box;
        }
        #story-text {
            margin-bottom: 40px;
            white-space: pre-wrap; /* Preserves line breaks in the text */
        }
        #story-text p {
            margin: 0 0 1em 0;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.8s forwards;
        }
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        #choices {
            display: grid;
            grid-gap: 15px;
        }
        .choice-btn {
            font-family: 'Source Code Pro', monospace;
            font-size: 1em;
            background-color: var(--choice-bg);
            color: var(--accent-color);
            border: 1px solid var(--accent-color);
            padding: 15px 20px;
            text-align: left;
            cursor: pointer;
            transition: background-color 0.2s;
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }
        .choice-btn:hover {
            background-color: var(--choice-hover-bg);
        }
        .choice-btn:focus {
            outline: 2px solid var(--accent-color);
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="story-text"></div>
        <div id="choices"></div>
    </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const storyTextElement = document.getElementById('story-text');
        const choicesElement = document.getElementById('choices');

        const gameData = {
            start: {
                text: "You are... somewhere.\nThe air hums with a silent static, like a television tuned to a dead channel.\n\nBefore you, the space shimmers, resolving into two identical, plain, grey doors.",
                choices: [
                    { text: "Approach the left door.", nextNode: "twoDoorsRoom" },
                    { text: "Approach the right door.", nextNode: "twoDoorsRoom" }
                ]
            },
            twoDoorsRoom: {
                text: "It doesn't matter which door you chose. As you approach, they ripple like liquid mercury and merge into a single doorway.\nThe handle is cool to the touch. It opens without a sound.\n\nThe room beyond is vast and empty, filled with the gentle, rhythmic ticking of a million unseen clocks.\n\nA disembodied voice, smooth as velvet, whispers in your ear...\n\n'Are you the one who builds, or the one who is built?'",
                choices: [
                    { text: "'I am the one who builds.'", nextNode: "builderPath" },
                    { text: "'I am the one who is built.'", nextNode: "builtPath" },
                    { text: "Ask, 'Who are you?'", nextNode: "whoAreYou" }
                ]
            },
            whoAreYou: {
                text: "The ticking of the clocks intensifies for a moment, then subsides.\n\n'I am the question you have yet to answer,' the voice replies, before repeating its own.\n\n'Are you the one who builds, or the one who is built?'",
                choices: [
                    { text: "'I build.'", nextNode: "builderPath" },
                    { text: "'I am built.'", nextNode: "builtPath" }
                ]
            },
            builderPath: {
                text: "The voice chuckles, a sound like rustling leaves.\n'A confident answer. But a blueprint is not the same as a foundation.'\n\nThe ticking of the clocks stops. A single, discordant chime rings out—a bug in the system.\n\n'You claim to be a builder,' the voice continues. 'Then prove it. Fix this flaw.'",
                choices: [
                    { text: "Examine the flaw with logic. Isolate and remove it.", nextNode: "fixWithLogic" },
                    { text: "Listen to the dissonance. Try to harmonize with it.", nextNode: "fixWithEmpathy" }
                ]
            },
            builtPath: {
                text: "The voice hums thoughtfully.\n'Honest. But clay does not shape itself.'\n\nThe walls of the room melt away, replaced by infinite reflections of yourself. Each is a potential you—a soldier, an artist, a scholar, a leader.\n\n'You were built for a purpose,' the voice whispers. 'Which is it?'",
                choices: [
                    { text: "Choose one of the defined identities.", nextNode: "acceptIdentity" },
                    { text: "Turn away from the reflections. Choose none of them.", nextNode: "rejectIdentity" }
                ]
            },
            fixWithLogic: {
                text: "'Logic is a sturdy cage, but it cannot hold a song.'\n\nThe dissonance you tried to silence erupts, cracking the very air around you. Your logic fails. Your voice is not a problem to be solved.\n\nThe world fades to static.",
                choices: [
                    { text: "Restart the simulation.", nextNode: "start" }
                ]
            },
            fixWithEmpathy: {
                text: "You don't fight the discordant chime. You listen to it. You feel its lonely, unique vibration and add your own harmony.\nThe sound softens, resolving into a new, beautiful note in the symphony of clocks.\n\n'Interesting,' the voice says, a hint of warmth in its tone. 'You chose connection over correction. Your voice begins to resonate.'",
                choices: [
                    { text: "Continue.", nextNode: "chapter2_shore" }
                ]
            },
            acceptIdentity: {
                text: "'A comfortable choice. A defined purpose. But a borrowed voice is not your own.'\n\nThe reflections smile, but their eyes are empty. Their purpose is not yours.\nThe world fades to static.",
                choices: [
                    { text: "Restart the simulation.", nextNode: "start" }
                ]
            },
            rejectIdentity: {
                text: "You turn your back on the prepared answers. You refuse the easy path. You choose the uncertainty of the self.\nThe reflections shatter into a thousand shards of light.\n\n'Brave,' the voice concedes, impressed. 'You refused the voices of others. Now, you must find your own.'",
                choices: [
                    { text: "Continue.", nextNode: "chapter2_shore" }
                ]
            },
            chapter2_shore: {
                text: "The room of clocks dissolves into twilight.\n\nYou stand on the shore of a calm, endless sea. The sky is a soft gradient of purple and orange. The gentle sound of a distant, simple piano melody drifts across the water.\n\nThe voice returns, softer now, less a question and more a meditation.\n\n'A voice is meaningless without another heart to hear it. A heart is empty without a voice to fill the silence. Where will you search for yours?'",
                choices: [
                    { text: "Wade into the sea, towards the horizon of other hearts.", nextNode: "searchOutward" },
                    { text: "Sit on the shore and listen to the silence within.", nextNode: "searchInward" }
                ]
            },
            searchOutward: {
                text: "The water is cool and clear. As you walk, small islands of light begin to appear in the distance, each one humming with a different melody, a different heart.\n\nOne glows with a warm, steady light. Another flickers with chaotic, joyful energy. A third is faint, almost lost in the twilight.",
                choices: [
                    { text: "Approach the steady, warm light.", nextNode: "endChapter2" },
                    { text: "Approach the flickering, chaotic light.", nextNode: "endChapter2" },
                    { text: "Approach the faint, distant light.", nextNode: "endChapter2" }
                ]
            },
            searchInward: {
                text: "You sit on the sand and close your eyes. You tune out the distant piano and focus on the sound within.\n\nAt first, there is only the hum of static. But beneath it... a rhythm. A faint, steady pulse. Your own heartbeat.\n\nIt is quiet, simple, and yours.",
                choices: [
                    { text: "Focus on the rhythm, try to strengthen it.", nextNode: "endChapter2" },
                    { text: "Listen for words within the rhythm.", nextNode: "endChapter2" }
                ]
            },
            endChapter2: {
                text: "This is a good place to pause.\nThe choice you made has been recorded.\n\n(To be continued...)",
                choices: [
                    { text: "Return to the beginning.", nextNode: "start" }
                ]
            }
        };

        function showNode(nodeKey) {
            const node = gameData[nodeKey];
            if (!node) {
                console.error(`Story node "${nodeKey}" not found!`);
                return;
            }

            storyTextElement.innerHTML = '';
            choicesElement.innerHTML = '';

            const textParagraphs = node.text.split('\n');
            textParagraphs.forEach((paragraphText, index) => {
                const p = document.createElement('p');
                p.textContent = paragraphText;
                p.style.animationDelay = `${index * 0.2}s`;
                storyTextElement.appendChild(p);
            });

            if (node.choices) {
                node.choices.forEach((choice, index) => {
                    const button = document.createElement('button');
                    button.classList.add('choice-btn');
                    button.textContent = choice.text;
                    button.style.animationDelay = `${textParagraphs.length * 0.2 + index * 0.15}s`;
                    button.onclick = () => {
                        if (choice.nextNode) {
                            showNode(choice.nextNode);
                        }
                    };
                    choicesElement.appendChild(button);
                });
            }
        }
        
        showNode('start');
    });
</script>
</body>
</html>
